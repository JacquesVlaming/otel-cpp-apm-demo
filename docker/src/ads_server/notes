g++ -std=c++17 -fPIC -shared libotel_preload.cpp \
  -o libotel_preload.so \
  -I$HOME/otel-cpp/install/include \
  -L$HOME/otel-cpp/install/lib64 \
  -lotel_trace \
  -lotel_exporter_otlp_grpc \
  -lotel_resources \
  -lotel_common \
  -lotel_sdk \
  -lpthread -ldl


cmake .. \
  -DBUILD_SHARED_LIBS=ON \
  -DWITH_OTLP_GRPC=ON \
  -DOPENTELEMETRY_INSTALL=ON \
  -DWITH_EXAMPLES=OFF \
  -DBUILD_TESTING=OFF \
  -DCMAKE_INSTALL_PREFIX=$HOME/otel-cpp/installrm -r -f *

cmake --build . --target all
cmake --install .